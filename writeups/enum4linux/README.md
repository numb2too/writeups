# enum4linux

Windows/Samba ç¶²è·¯è³‡è¨Šæšèˆ‰å·¥å…· æ»²é€æ¸¬è©¦ï¼ˆç‰¹åˆ¥æ˜¯ SMB/NetBIOS ç’°å¢ƒï¼‰

## ä½¿ç”¨ç¯„ä¾‹

### -a
```bash
â”Œâ”€â”€(kaliã‰¿kali)-[~/tryhackme/yearOfTheOwl]
â””â”€$ enum4linux -a owl.thm
Starting enum4linux v0.9.1 ( http://labs.portcullis.co.uk/application/enum4linux/ ) on Fri Oct 31 11:12:01 2025

 =========================================( Target Information )=========================================                                               
                                                                            
Target ........... owl.thm                                                  
RID Range ........ 500-550,1000-1050
Username ......... ''
Password ......... ''
Known Usernames .. administrator, guest, krbtgt, domain admins, root, bin, none

```


## èªªæ˜

### ğŸ§° ä¸€ã€`enum4linux` æ˜¯ä»€éº¼ï¼Ÿ

`enum4linux` æ˜¯ä¸€å€‹ **Windows/Samba ç¶²è·¯è³‡è¨Šæšèˆ‰å·¥å…·**ï¼Œç”¨æ–¼åœ¨ **æ»²é€æ¸¬è©¦ï¼ˆç‰¹åˆ¥æ˜¯ SMB/NetBIOS ç’°å¢ƒï¼‰** ä¸­è‡ªå‹•åŒ–æ”¶é›†ç›®æ¨™ä¸»æ©Ÿçš„å„ç¨®è³‡è¨Šã€‚

å®ƒçš„åŸç†ä¸»è¦æ˜¯ï¼š
ğŸ‘‰ åˆ©ç”¨ **SMBï¼ˆServer Message Blockï¼‰å”å®š** èˆ‡ **NetBIOS** çš„æ©Ÿåˆ¶ï¼Œå‘é ç«¯ä¸»æ©ŸæŸ¥è©¢å¯å…¬é–‹çš„è³‡è¨Šã€‚
ğŸ‘‰ å…§éƒ¨å…¶å¯¦å°±æ˜¯å‘¼å«äº†å¤šå€‹åƒ `smbclient`ã€`rpcclient`ã€`net` ç­‰ Samba å·¥å…·çµ„çš„æŒ‡ä»¤ä¾†å®Œæˆã€‚

---

### ğŸ§© äºŒã€`enum4linux` çš„åŠŸèƒ½

å®ƒæœƒå˜—è©¦æšèˆ‰ï¼ˆenumerateï¼‰ï¼š

| é¡åˆ¥                 | èªªæ˜                                     |
| -------------------- | ---------------------------------------- |
| ğŸ”¹ ä½¿ç”¨è€…å¸³è™Ÿ         | å˜—è©¦åˆ—å‡ºç³»çµ±ä¸Šçš„ä½¿ç”¨è€…åç¨±åˆ—è¡¨           |
| ğŸ”¹ ç¾¤çµ„               | é¡¯ç¤ºç›®æ¨™é›»è…¦æˆ–ç¶²åŸŸä¸­çš„ç¾¤çµ„               |
| ğŸ”¹ ç¶²åŸŸè³‡è¨Š           | åŒ…å«ç¶²åŸŸåç¨±ã€SIDã€ä¸»æ©Ÿè³‡è¨Š              |
| ğŸ”¹ å…±äº«ç›®éŒ„ï¼ˆSharesï¼‰ | é¡¯ç¤ºå¯è¢«è¨ªå•çš„ SMB/CIFS è³‡æº             |
| ğŸ”¹ ä¸»æ©Ÿ OS èˆ‡ç‰ˆæœ¬     | å˜—è©¦å¾ SMB banner åˆ¤æ–·ä½œæ¥­ç³»çµ±           |
| ğŸ”¹ å¯†ç¢¼ç­–ç•¥           | åŒ…å«å¯†ç¢¼é•·åº¦ã€éæœŸæ™‚é–“ç­‰è¨­å®šï¼ˆè‹¥å¯å­˜å–ï¼‰ |

---

### ğŸ§  ä¸‰ã€èˆ‡ `smbclient` çš„é—œä¿‚

ä½ èªªå¾—æ²’éŒ¯ï¼šã€Œ`enum4linux` ç®—æ˜¯ `smbclient` çš„æšèˆ‰å·¥å…·ã€ï¼Œä½†æ›´æº–ç¢ºåœ°èªªï¼š

> `enum4linux` æ˜¯ä¸€å€‹æ•´åˆè…³æœ¬ï¼Œå®ƒ**è‡ªå‹•åŒ–å‘¼å«å¤šå€‹ Samba å·¥å…·ï¼ˆåŒ…å« smbclientï¼‰** ä¾†æšèˆ‰è³‡è¨Šã€‚

| å·¥å…·         | åŠŸèƒ½ç¯„åœ                                                   | ç‰¹é»                           |
| ------------ | ---------------------------------------------------------- | ------------------------------ |
| `smbclient`  | æ‰‹å‹•é€£ç·šã€ä¸‹è¼‰ã€ä¸Šå‚³ SMB æª”æ¡ˆï¼Œé¡ä¼¼ FTP å®¢æˆ¶ç«¯             | éœ€è¦ä½ è‡ªå·±è¼¸å…¥å‘½ä»¤             |
| `enum4linux` | è‡ªå‹•åŒ–æšèˆ‰å„ç¨®è³‡è¨Šï¼ˆä½¿ç”¨è€…ã€ç¾¤çµ„ã€sharesã€OSã€domain SIDï¼‰ | ä¸€æ¬¡åŸ·è¡Œå¿«é€Ÿæ”¶é›†æ‰€æœ‰å¯å…¬é–‹è³‡è¨Š |

---

### ğŸ§© å››ã€å¸¸ç”¨èªæ³•ç¯„ä¾‹

```bash
# æšèˆ‰æ•´å°ä¸»æ©Ÿçš„ SMB è³‡è¨Š
enum4linux -a 10.10.10.5

# æŒ‡å®šä½¿ç”¨è€…èˆ‡å¯†ç¢¼é€²è¡Œæšèˆ‰
enum4linux -u "guest" -p "" -a 10.10.10.5

# åªåˆ—å‡ºä½¿ç”¨è€…
enum4linux -U 10.10.10.5

# åªåˆ—å‡ºå…±äº«ç›®éŒ„
enum4linux -S 10.10.10.5
```

---

### ğŸ§© äº”ã€æ”¹é€²ç‰ˆï¼š`enum4linux-ng`

ç”±æ–¼èˆŠç‰ˆ `enum4linux` å·²åœæ­¢ç¶­è­·ï¼Œç¾åœ¨ç¤¾ç¾¤æ¨å‡ºæ–°ç‰ˆï¼š
ğŸ‘‰ [`enum4linux-ng`](https://github.com/cddmp/enum4linux-ng)

å„ªé»ï¼š

* Python 3 æ’°å¯«ï¼ˆä¸å†ä¾è³´ Perlï¼‰
* åŸ·è¡Œé€Ÿåº¦æ›´å¿«
* æ›´æ¸…æ™°çš„è¼¸å‡ºæ ¼å¼
* ä»æ”¯æ´é¡ä¼¼åƒæ•¸ï¼š

  ```bash
  enum4linux-ng 10.10.10.5 -A
  ```

---

### âœ… ç¸½çµ

| æ¯”è¼ƒé …   | `smbclient`              | `enum4linux`                         |
| -------- | ------------------------ | ------------------------------------ |
| å·¥å…·æ€§è³ª | æ‰‹å‹•æ“ä½œ SMB             | è‡ªå‹•åŒ–æšèˆ‰è…³æœ¬                       |
| å¯åšä»€éº¼ | ç€è¦½/ä¸‹è¼‰/ä¸Šå‚³æª”æ¡ˆ       | æšèˆ‰ä½¿ç”¨è€…ã€ç¾¤çµ„ã€sharesã€ç¶²åŸŸè³‡è¨Š   |
| é—œä¿‚     | è¢« `enum4linux` å…§éƒ¨ä½¿ç”¨ | ä¾è³´ `smbclient`ã€`rpcclient` ç­‰å‘½ä»¤ |

---

å¦‚æœä½ æ­£åœ¨åš TryHackMe æˆ– HTB é¡çš„æ»²é€å¯¦æˆ°ï¼š
ğŸ‘‰ é€šå¸¸æµç¨‹æ˜¯ï¼š
1ï¸âƒ£ `nmap -p 139,445 -sV` â†’ ç¢ºèªæœ‰ SMB
2ï¸âƒ£ `enum4linux -a <target>` â†’ æšèˆ‰å¸³è™Ÿèˆ‡å…±äº«
3ï¸âƒ£ `smbclient //target/share` â†’ ç™»å…¥å¯¦éš›å…±äº«å€æ¢ç´¢è³‡æ–™

